<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Census Block Group</title>
</head>
<body style="font-family: Arial, sans-serif; padding: 10px;">
    <h4 style="margin: 0 0 10px 0;">Census Block Group</h4>
    <p style="margin: 5px 0;"><b>GEOID:</b> {{ block.geoid }}</p>
    <p style="margin: 5px 0;"><b>Tract:</b> {{ block.tractce }}</p>
    <p style="margin: 5px 0;"><b>Block Group:</b> {{ block.blkgrpce }}</p>

    <label><b>Select Options:</b></label>
    <div id="checkbox-container-{{ block.geoid }}"></div>

    <script>
        const options = [
            { value: "student_demographics", label: "Student demographics (race/ethnicity, gender, etc.)" },
            { value: "economic_barriers", label: "Economic barriers (household income, financial hardship)" },
            { value: "language_barriers", label: "Language barriers (English is not primary language at home)" },
            { value: "parent_education", label: "Parental education level (low exposure to CS at home)" },
            { value: "no_computer_home", label: "Limited or no access to a computer at home" },
            { value: "no_internet_home", label: "Limited or no access to reliable internet at home" },
            { value: "distance_issues", label: "Long commute to school or CS-related programs" },
            { value: "lack_cs_intro_courses", label: "No or limited introductory CS courses available at school" },
            { value: "lack_cs_advanced_courses", label: "No or limited advanced CS courses available at school" },
            { value: "other", label: "Other (please specify)" }
        ];

        // Function to generate checkboxes
        function generateCheckboxes(geoid) {
            const container = document.getElementById("checkbox-container-" + geoid);

            options.forEach(option => {
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.name = "barriers";
                checkbox.value = option.value;
                checkbox.id = option.value + "-" + geoid;
                checkbox.onchange = function() { toggleCustomInput(geoid); };

                const label = document.createElement("label");
                label.htmlFor = checkbox.id;
                label.textContent = " " + option.label;

                container.appendChild(checkbox);
                container.appendChild(label);
                container.appendChild(document.createElement("br"));
            });

            // Create custom input field (hidden by default)
            const customInput = document.createElement("input");
            customInput.type = "text";
            customInput.id = "custom-input-" + geoid;
            customInput.name = "other_specify";
            customInput.placeholder = "Enter your option";
            customInput.style.display = "none"; // Initially hidden

            container.appendChild(customInput);
        }

        // Function to show/hide custom input field
        function toggleCustomInput(geoid) {
            const otherCheckbox = document.getElementById("other-" + geoid);
            const customInput = document.getElementById("custom-input-" + geoid);

            if (otherCheckbox.checked) {
                customInput.style.display = "block";
            } else {
                customInput.style.display = "none";
            }
        }

        // Run function to generate checkboxes dynamically
        generateCheckboxes("{{ block.geoid }}");
    </script>
</body>
</html>
